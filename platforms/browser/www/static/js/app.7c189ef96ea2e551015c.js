webpackJsonp([10],{"4ml/":function(e,t){},"5reh":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r});var o="login",a="logout",r="updateMenu"},IjVM:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n("7+uW"),r=n("NYxO"),i=n("bOdI"),u=n.n(i),c=n("5reh"),s=n("g4PW"),l={baseUrl:n.n(s)()("production","production")?"http://172.19.1.82:8003/":"api/"};a.a.use(r.a);var d=new r.a.Store({state:{user:void 0==localStorage.getItem("user")?null:localStorage.getItem("user"),menuIndex:0,baseUrl:l.baseUrl},mutations:(o={},u()(o,c.a,function(e,t){localStorage.user=t,e.user=t}),u()(o,c.b,function(e){localStorage.removeItem("user"),e.user=null}),u()(o,c.c,function(e,t){e.menuIndex=t}),o),actions:{}}),p={name:"App",data:function(){return{transition:"slide-left"}},watch:{$route:function(e,t){console.log(e),console.log(t),"homeChild"==e.name?this.$store.commit("updateMenu",0):"toudi"==e.name?this.$store.commit("updateMenu",1):"lanshou"==e.name?this.$store.commit("updateMenu",2):"admin"==e.name&&this.$store.commit("updateMenu",3);var n=this.$router.isBack;console.log(n),this.transition=n?"slide-right":"slide-left",this.$router.isBack=!1}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:this.transition}},[t("router-view",{staticClass:"view"})],1)],1)},staticRenderFns:[]};var m=n("VU/8")(p,h,!1,function(e){n("Weyt"),n("mdUi")},null,null).exports,f=n("/ocq"),g=n("//Fk"),b=n.n(g),A=n("Fd2+"),v={getPosition:function(e,t){navigator.geolocation.getCurrentPosition(e,t,{maximumAge:3e5,timeout:3e5,enableHighAccuracy:!0})},getImage:function(e,t){var n={quality:50,destinationType:Camera.DestinationType.FILE_URI,sourceType:0};navigator.camera.getPicture(e,t,n)},openScan:function(e){QRScanner.prepare(function(t,n){console.log(t),t&&("SCAN_CANCELED"===t.name?Object(A.b)("已取消扫描"):"BACK_CAMERA_UNAVAILABLE"===t.name?Object(A.b)("后置摄像头不可用,请检查设置!"):"CAMERA_ACCESS_DENIED"===t.name?Object(A.b)("用户拒绝摄像机访问!"):"CAMERA_ACCESS_DENIED"===t.name?Object(A.b)("摄像机访问受到限制 (由于家长控制，组织安全配置配置文件或类似原因)!"):"CAMERA_ACCESS_DENIED"===t.name?Object(A.b)("相机不可用，因为它不存在或无法配置!"):Object(A.b)("出现错误,原因不详,请检查手机设置!")),n.authorized?(QRScanner.show(),QRScanner.scan(e)):n.denied&&A.a.confirm({title:"是否同意",message:"前往设置打开摄像访问权限?"}).then(function(){QRScanner.openSettings()}).catch(function(){})})},closeScan:function(){QRScanner.cancelScan(),QRScanner.hide(),QRScanner.destroy()},openLight:function(){QRScanner.enableLight()},closeLight:function(){QRScanner.disableLight()},openVibrate:function(e){navigator.vibrate(e)},openBaiduMap:function(e){startApp.set({action:"ACTION_VIEW",category:"CATEGORY_DEFAULT",type:"text/css",package:"com.baidu.BaiduMap",uri:"baidumap://map/direction?$origin="+e.startlat+","+e.startlng+"&destination=name:"+e.addr+"||latlng:"+e.endlat+","+e.endlng+"&coord_type=bd09ll&mode=driving&src=andr.baidu.openAPIdemo",flags:["FLAG_ACTIVITY_CLEAR_TOP","FLAG_ACTIVITY_CLEAR_TASK"],intentstart:"startActivity"},{EXTRA_STREAM:"extraValue1",extraKey2:"extraValue2"}).start(function(){Object(A.b)("打开成功")},function(e){Object(A.b)("打开百度地图失败,请核实是否安装百度地图app!")})},getBaiduPosition:function(){return new b.a(function(e,t){var n=new BMap.Geolocation;n.enableSDKLocation(),n.getCurrentPosition(function(t){0===n.getStatus()?(console.log(t),e(t)):2===n.getStatus()?Object(A.b)("位置未知,请稍后再试!"):8===n.getStatus()?Object(A.b)("定位超时,请稍后再试!"):6===n.getStatus()&&Object(A.b)("没有定位权限!")},{enableHighAccuracy:!0,SDKLocation:!0,maximumAge:0,timeout:6e4})})}};f.a.prototype.goBack=function(){this.isBack=!0,v.closeScan(),window.history.go(-1)},a.a.use(f.a);var S=new f.a({routes:[{path:"/",name:"login",component:function(e){return n.e(5).then(function(){return e(n("2ZEU"))}.bind(null,n)).catch(n.oe)}},{path:"/home",name:"home",redirect:"homeChild",meta:{requireAuth:!0,index:1},component:function(e){return n.e(8).then(function(){return e(n("P1Pu"))}.bind(null,n)).catch(n.oe)},children:[{name:"homeChild",path:"/homeChild",meta:{requireAuth:!0,menuIndex:0},component:function(e){return n.e(0).then(function(){return e(n("i58q"))}.bind(null,n)).catch(n.oe)}},{name:"toudi",path:"/toudi",meta:{requireAuth:!0,menuIndex:1},component:function(e){return n.e(3).then(function(){return e(n("b1YA"))}.bind(null,n)).catch(n.oe)}},{name:"lanshou",path:"/lanshou",meta:{requireAuth:!0,menuIndex:2},component:function(e){return n.e(1).then(function(){return e(n("3yqb"))}.bind(null,n)).catch(n.oe)}},{name:"admin",path:"/admin",meta:{requireAuth:!0,menuIndex:3},component:function(e){return n.e(6).then(function(){return e(n("EHPh"))}.bind(null,n)).catch(n.oe)}}]},{path:"/toudiCount",name:"toudiCount",meta:{requireAuth:!0},component:function(e){return n.e(7).then(function(){return e(n("brRb"))}.bind(null,n)).catch(n.oe)}},{path:"/updatePassword",name:"updatePassword",meta:{requireAuth:!0},component:function(e){return n.e(2).then(function(){return e(n("2pmp"))}.bind(null,n)).catch(n.oe)}},{path:"/scanPage",name:"scanPage",meta:{requireAuth:!0},component:function(e){return n.e(4).then(function(){return e(n("lTbj"))}.bind(null,n)).catch(n.oe)}}]});S.beforeEach(function(e,t,n){console.log(e),e.meta.requireAuth?d.state.user?n():n({path:"/",query:{redirect:e.fullPath}}):n()});var y=S,C=(n("4ml/"),n("sVYa"),n("Lw6n")),E=n.n(C),I=(n("IjVM"),n("mtWM")),M=n.n(I);M.a.defaults.baseURL=l.baseUrl,M.a.interceptors.request.use(function(e){return d.state.user&&("get"==e.method?-1==e.url.indexOf("https")&&(e.headers.Authorization=d.state.user.token):e.headers.Authorization=d.state.user.token),e},function(e){return b.a.reject(e)}),M.a.interceptors.response.use(function(e){return e},function(e){if(e.response)switch(console.log(e.response),e.response.status){case 401:d.commit(types.LOGOUT),console.log(y.currentRoute.path),"login"!==y.currentRoute.path&&y.replace({path:"/",query:{redirect:y.currentRoute.path}})}return b.a.reject(e)});var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new b.a(function(n,o){M()({method:"get",url:e,params:t}).then(function(e){n(e.data)}).catch(function(e){console.log(e,"异常")})})},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new b.a(function(n,o){M()({method:"post",url:e,data:t}).then(function(e){n(e.data)}).catch(function(e){console.log(e,"异常")})})},w={name:"Debounce",abstract:!0,props:{time:{type:Number,default:800},events:{type:String,default:"click"},isDebounce:{type:Boolean,default:!1}},created:function(){this.eventKeys=this.events.split(","),this.originMap={},this.debouncedMap={}},render:function(){var e=this,t=this.$slots.default[0];return this.eventKeys.forEach(function(n){var o,a,r,i,u,c,s=t.data.on[n];s===e.originMap[n]&&e.debouncedMap[n]?t.data.on[n]=e.debouncedMap[n]:s&&(e.originMap[n]=s,e.debouncedMap[n]=(o=s,a=e.time,r=e.isDebounce,i=t,r?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u&&clearTimeout(u),u=setTimeout(function(){o.apply(i,t)},a)}:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(new Date).getTime();r-c<a&&c||(c=r,o.apply(i,t))}),t.data.on[n]=e.debouncedMap[n])}),t}};a.a.component("Debounce",w);new E.a;a.a.use(A.c),a.a.prototype.$get=R,a.a.prototype.$post=_,a.a.prototype.plugins=v,a.a.config.productionTip=!1,a.a.use(r.a),document.addEventListener("deviceready",function(){new a.a({el:"#app",router:y,store:d,components:{App:m},template:"<App/>"})},!1)},Weyt:function(e,t){},mdUi:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7c189ef96ea2e551015c.js.map